<aside>
	<button id="rename-file">zmień nazwę</button>
	<button id="show-filters">filtry</button>
	<br>
	<div id="filters" style="max-height: 0;">
		<h4>Filtry</h4>

		{{#each effects}}
		<figure class="filter">
			<input type="image" src="{{../path}}" width="100" alt="" style="filter: {{name}}(100%);">
			<figcaption>{{name}}</figcaption>
		</figure>
		{{/each}}
	</div>
	</div>
</aside>

<div id="content" class="file-editor">
	<div class="file-info">{{path}}</div>
	<div class="image">
		<img src="{{path}}" alt="">
	</div>
</div>

<dialog id="rename-modal" class="modal">
	<form action="/rename" method="get">
		<label for="name">Nowa nazwa</label>
		<input type="text" name="newName" placeholder="nazwa pliku" required />
		<input type="hidden" id="to-rename" name="name">
		<input type="hidden" name="textEditor" value="true">

		<div>
			<input type="submit" value="OK" id="rename-submit" style="display: none;" />
			<input type="button" value="OK" onclick="document.getElementById('rename-submit').click();" />
			<input type="button" value="Cancel" id="rename-cancel">
		</div>
	</form>
</dialog>

<script>
	const filters = document.getElementById("filters");

	document.getElementById("rename-file").onclick = () => {
		document.getElementById("to-rename").value = "{{path}}";
		document.getElementById("rename-modal").showModal();
	}
	document.getElementById("rename-cancel").onclick = () => {
		document.getElementById("rename-modal").close();
	}
	document.getElementById("show-filters").onclick = () => {
		filters.classList.toggle("show");
		if (!filters.classList.contains("show")) {
			setTimeout(() => {
				filters.style.maxHeight = 0;
			}, 500);
		} else {
			filters.style.maxHeight = "100vh";
		}
	}

	for (const input of document.querySelectorAll("input[type='image']")) {
		input.onclick = () => {
			document.querySelector("img").style.filter = input.style.filter;
		}
	}

</script>
